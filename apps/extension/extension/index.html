<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Crypto Bubble View</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="theme-dark">
  <div id="app">
    <header class="top-bar">
      <div class="top-actions right">
        <div class="mini-select">
            <select id="timeframe">
              <option value="24h" selected>Day</option>
              <option value="1h">Hour</option>
              <option value="7d">Week</option>
              <option value="30d">Month</option>
              <option value="365d">Year</option>
            </select>
        </div>
        <div class="toggle-group" id="size-toggle">
          <button class="toggle-btn active" data-size-mode="cap" title="Size by market cap (log-scaled)">Cap</button>
          <button class="toggle-btn" data-size-mode="percent" title="Size by percent change of selected timeframe">% Change</button>
        </div>
        <button id="limit-btn" class="pill-btn ghost tight square">1-100</button>
        <button id="favorite-filter" class="icon-btn small star-btn" title="Favorites">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 3.5l2.2 4.7 5.1.6-3.8 3.5 1 5-4.5-2.6-4.5 2.6 1-5-3.8-3.5 5.1-.6z" fill="currentColor" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round" />
          </svg>
        </button>
        <button id="settings-btn" class="icon-btn small" title="Settings">
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <circle cx="12" cy="12" r="3" fill="none" stroke-width="1.6"/>
            <path d="M19 12a7 7 0 0 0-.14-1.38l1.86-1.36-1.8-3.12-2.18.62A7 7 0 0 0 14.38 5L14 2h-4l-.38 3a7 7 0 0 0-2.36 1.76l-2.18-.62-1.8 3.12 1.86 1.36A7 7 0 0 0 5 12c0 .47.05.93.14 1.38l-1.86 1.36 1.8 3.12 2.18-.62A7 7 0 0 0 10 19l.38 3h4l.38-3a7 7 0 0 0 2.36-1.76l2.18.62 1.8-3.12-1.86-1.36c.09-.45.14-.91.14-1.38Z" fill="none" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
        <button id="fullscreen-btn" class="icon-btn small" aria-label="Toggle fullscreen" title="Fullscreen">
          <span class="icon-text">⛶</span>
        </button>
      </div>
    </header>

    <main>
      <div id="bubble-container"></div>
      <div id="tooltip" class="tooltip hidden"></div>
      <div id="limit-backdrop" class="popup-backdrop hidden"></div>
      <div id="limit-popup" class="popup hidden">
        <div class="popup-header">
          <div class="popup-title">Pages</div>
          <button class="popup-close" id="limit-close" aria-label="Close">×</button>
        </div>
        <div class="popup-body" id="limit-options"></div>
      </div>
      <div id="settings-backdrop" class="popup-backdrop hidden"></div>
      <div id="settings-popup" class="popup hidden">
        <div class="popup-header">
          <div class="popup-title">Settings</div>
          <button class="popup-close" id="settings-close" aria-label="Close">×</button>
        </div>
        <div class="popup-body settings-body">
          <div class="settings-row">
            <span class="label">Status</span>
            <span class="value" id="last-update">Loading...</span>
          </div>
          <div class="settings-row">
            <span class="label">Background</span>
            <input id="background-picker" class="color-input" type="color" value="#0b0f1a" />
          </div>
          <div class="settings-row">
            <span class="label">View</span>
            <button id="view-toggle-settings" class="pill-btn ghost">2D</button>
          </div>
          <div class="settings-row">
            <span class="label">Refresh</span>
            <button id="refresh-btn" class="pill-btn ghost tight">Refresh</button>
          </div>
          <div class="settings-row">
            <span class="label">Bubble Label</span>
            <div class="toggle-group" id="label-toggle-group">
              <button class="toggle-btn active" data-label-mode="both">Name + Logo</button>
              <button class="toggle-btn" data-label-mode="name">Name</button>
              <button class="toggle-btn" data-label-mode="logo">Logo</button>
            </div>
          </div>
          <div class="settings-row">
            <span class="label">Bubble Style</span>
            <div class="toggle-group" id="style-toggle">
              <button class="toggle-btn active" data-bubble-style="glass">Glass</button>
              <button class="toggle-btn" data-bubble-style="basic">Basic</button>
            </div>
          </div>
        </div>
      </div>
      <div id="coin-backdrop" class="popup-backdrop hidden"></div>
      <div id="coin-modal" class="popup coin-modal hidden">
        <div class="popup-header">
          <div class="popup-title" id="coin-title">Coin</div>
          <button class="popup-close" id="coin-close" aria-label="Close">×</button>
        </div>
        <div class="popup-body">
          <div class="coin-meta" id="coin-meta"></div>
          <div class="coin-grid" id="coin-grid"></div>
          <div class="coin-actions">
            <button id="coin-fav-btn" class="pill-btn ghost">Add to favorite</button>
            <a id="coin-link" class="pill-btn" target="_blank" rel="noopener">View on CoinGecko</a>
          </div>
        </div>
      </div>
    </main>
  </div>

  <script src="main.js"></script>
</body>
</html>
